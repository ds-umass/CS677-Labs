# Design
## Componnents
This project have 3 server components, one client with CLI and tests.
1. Catalog server - It is in `src/pygmy-backend`
2. Order server - It is in `src/pygmy-backend`
3. Frontend server - It is in `src/pygmy-frontend`
4. Client and tests - It is in `tests/pygmy-client`
Server address and ports, as well as endpoints for their services, can be configured via `.env` file.

## Overall architecture
This project is built on Rust, with `actix` framework for servers and `reqwest` for clients. For data persistency, it use `SQLite` with `diesel` as ORM. The reason to choose those tools is because they are fast and easy to development in the same time. Data are modeled and items are imported first with diesel migration scripts. 'diesel' will generate database schemas for us to build models upon it.In most cases, we don't need to write SQL except some statements cannot been generated by `diesel`. To manage route and for HTTP server, we use `actix` server setup. Server logs are also setup there to see how is the server working and incomming requests.

All applications are build in asynchronization pattern. Which is the server functions are mostly state machine composer, especially for remote microservice server requests. Transacrion is used on updating stock because we need to check if there is enough on stock.

For simplicity this server have weak concurrency control. Which is it totally relying on the embedded SQLite database engine itself for consistency. `diesel` itself is not asynchronized at all. For every database operations, it will block the state machine. This can be improved by using a thread pool or using asynchronized version of ORM libraries.

### Frontend improvement
It is easy to say that the frontend server is merly an proxy to catalog and order server. In this case, frontend server does not need to have any knowledge on data format for each of the backend servers. In our implementation, responses JSON from backend servers are bypassed without deserialization and serialization. This can enable better performance and simplier to maintain.